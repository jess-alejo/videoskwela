%h1 Courses Pending Approval

.row
  .col-md-3.mb-3
    .card.mb-2
      .card-header
        Filter by
      .card-body
        = search_form_for @ransack_courses, as: :courses_search, url: @ransack_path do |f|
          = f.search_field :title_cont, placeholder: 'Title', class: 'form-control mb-2'
          = f.search_field :short_description_cont, placeholder: 'Description', class: 'form-control mb-2'
          = f.select :language_cont, Course::LANGUAGES, { include_blank: 'Language' }, class: 'form-select mb-2'
          = f.select :level_cont, Course::LEVELS, { include_blank: 'Level' }, class: 'form-select mb-2'
          = f.search_field :price_eq, placeholder: 'Price', class: 'form-control mb-2'
          = f.search_field :author_email_cont, placeholder: 'Author', class: 'form-control mb-2'
          .row.g-2
            .col-lg-6
              = f.submit 'Search', class: 'btn btn-primary w-100'
            .col-lg-6
              = link_to 'Refresh', @ransack_path, class: 'btn btn-secondary w-100'
    .card
      .card-header
        Sort by
      .list-group.list-group-flush
        .list-group-item
          = sort_link @ransack_courses, :title, 'Title'
        .list-group-item
          = sort_link @ransack_courses, :author_email, 'Author'
        .list-group-item
          = sort_link @ransack_courses, :workflow_state, 'Status'
        .list-group-item
          = sort_link @ransack_courses, :updated_at, 'Latest'
  .col-md-9
    .table-responsive
      %table.table.table-bordered.table-sm.table-striped
        %thead
          %tr
            %th
              .text-muted.fa.fa-graduation-cap.me-1
              Course
            %th
              .text-muted.fa.fa-chalkboard-teacher.me-1
              Author
            %th
              .text-muted.fa.fa-tachometer-alt.me-1
              Status
            %th
              .text-muted.fa.fa-thumbs-up.me-1
              Action

        %tbody
          - @courses.each do |course|
            %tr
              %td
                = link_to course.title, course
              %td= course.author
              %td
                = badge_for_course_status(course)
              %td
                = link_to 'Review', review_course_path(course), method: :patch, class: 'btn btn-outline-primary btn-sm py-0 px-2' if course.can_review?
                = link_to 'Approve', approve_course_path(course), method: :patch, class: 'btn btn-outline-primary btn-sm py-0 px-2' if course.can_approve?


    != pagy_bootstrap_nav(@pagy)